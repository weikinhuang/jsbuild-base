/*!
 * Classify JavaScript Array Extension Class v0.1.0
 * http://www.closedinterval.com/
 *
 * Copyright 2012, Wei Kin Huang
 * Classify-Array is freely distributable under the MIT license.
 *
 * Date: Fri, 06 Jul 2012 18:12:52 GMT
 */;(function(e,t){"use strict";var n=function(e){var t=Array.prototype,n=Object.prototype.toString,r=Object.prototype.hasOwnProperty,i,s,o,u,a,f;i=function(e){var t=Number(e);return t!==t?0:t!==0&&t!==Infinity&&t!==-Infinity?(t>0||-1)*Math.floor(Math.abs(t)):t},u=t.indexOf?function(e,n){return t.indexOf.call(e,n)}:function(e,t){var n=0,r=e.length;while(n<r){if(e[n]===t)return n;n++}return-1},a=function(e){var n=0,r=e.length,i=[];while(n<r)e&&e[n].length?t.push.apply(i,t.slice.call(e[n],0)):i.push(e[n]),n++;return i},t.map?s=function(e,n){return this.getNewObject(t.map.apply(this,arguments))}:s=function(e,t){var n=[],r=0,i=this.length;while(r<i)n[n.length]=e.call(t||null,this[r],r,this),r++;return this.getNewObject(n)},t.filter?o=function(e,n){return this.getNewObject(t.filter.apply(this,arguments))}:o=function(e,t){var n=[],r=0,i=this.length;while(r<i)e.call(t||null,this[r],r,this)&&(n[n.length]=this[r]),r++;return this.getNewObject(n)},f=e.getGlobalNamespace().create("Array",Array,{length:0,init:function(){this.push.apply(this,arguments)}}),f.isArray=Array.isArray||function(t){return n.call(t)=="[object Array]"},f.from=function(e){var t=Object,n=t(e),i=new f,s=[],o=0,u=n.length>>>0;for(;o<u;o++)r.call(n,o)&&(s[o]=n[o]);return i.push.apply(i,s),i},f.of=function(){var e=new f;return e.push.apply(e,arguments),e},f.addUnwrappedProperty({toArray:function(){return t.slice.call(this,0)},getNewObject:function(e){var t=new f;return t.push.apply(t,e),t},pop:t.pop,push:t.push,reverse:t.reverse,shift:t.shift,sort:t.sort,join:t.join,filter:o,map:s,splice:function(){return this.getNewObject(t.splice.apply(this,arguments))},unshift:function(){return t.unshift.apply(this,arguments),this.length},concat:function(e){return this.getNewObject(t.concat.apply(this.toArray(),arguments))},slice:function(e,n){return this.getNewObject(t.slice.apply(this,arguments))},shuffle:function(){var e=this.length,t=e,n,r;while(t--)n=parseInt(Math.random()*e,10),r=this[t],this[t]=this[n],this[n]=r;return this},copy:function(){return this.getNewObject(t.slice.call(this,0))},fill:function(e,t){this.clear();while(e-->0)this.push(t);return this},range:function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0;this.clear();while(i++<r)this.push(e),e+=n;return this},indexOf:t.indexOf||function(e,t){var n=0,r=this.length>>>0;if(r===0)return-1;arguments.length>1&&(n=i(t));if(n<r){for(;n<r;n++)if(this[n]===e)return n;return-1}return-1},lastIndexOf:t.lastIndexOf||function(e,t){var n=this.length>>>0,r=n,s;if(n===0)return-1;arguments.length>1&&(r=i(t)),s=r<0?n-Math.abs(r):Math.min(r,n-1);for(;s>=0;s--)if(this[s]===e)return s;return-1},include:function(e){return this.indexOf(e)!==-1},remove:function(){var e=t.slice.call(arguments,0),n=0,r=e.length,i;for(;n<r;n++)i=this.indexOf(e[n]),i>-1&&this.splice(i,1);return this},removeAll:function(){var e=t.slice.call(arguments,0),n=0,r=e.length,i;for(;n<r;n++)do i=this.indexOf(e[n]),i>-1&&this.splice(i,1);while(i>=0)},clear:function(){return this.length=0,this},first:function(){return this[0]},last:function(){return this[this.length-1]},get:function(e){return this[e<0?this.length+e:e]},rand:function(){return this[Math.round(Math.random()*(this.length-1))]},size:function(){return this.length},diff:function(e){var t=a(arguments);return this.unique().filter(function(e){return u(t,e)===-1})},intersect:function(e){var t=a(arguments);return this.unique().filter(function(e){return u(t,e)>-1})},asyncEach:function(e,t,n,r){var i,s,o=!1,u=this.toArray(),a=this,f=0,l=function(){i=+(new Date);do if(e.call(n||null,u.shift(),f++,a)===!1){o=!0;break}while(!o&&u.length>0&&+(new Date)-i<50);!o&&u.length>0?s=setTimeout(l,r||25):t&&t.call(n||null,a)};return a.length>0?s=setTimeout(l,r||25):t&&t.call(n||null,a),this},every:t.every||function(e,t){var n=0,r=this.length;while(n<r){if(!e.call(t||null,this[n],n,this))return!1;n++}return!0},forEach:t.forEach||function(e,t){var n=0,r=this.length;while(n<r)e.call(t||null,this[n],n,this),n++},parallelEach:function(e,t,n,r){t=t>>>0||1;var i=this,s=this.toArray(),o=0,u=1,a=s.length,f=function(l){--u;while(u<t&&s.length>0)++u,e.call(r||null,f,s.shift(),o++,i);if(a--===0&&u===0){n&&n.call(r||null,i);return}};return f(),this},some:t.some||function(e,t){var n=0,r=this.length;while(n<r){if(e.call(t||null,this[n],n,this))return!0;n++}return!1},reduce:t.reduce||function(e,t){var n=0,r=this.length;if(arguments.length<2){if(r===0)throw new TypeError("Array length is 0 and no second argument");t=this[0],n=1}while(n<r)t=e.call(null,t,this[n],n,this),++n;return t},reduceRight:t.reduceRight||function(e,t){var n=this.length;if(n===0&&arguments.length===1)throw new TypeError("Array length is 0 and no second argument");var r=n-1;arguments.length<2&&(t=this[r--]);while(r>=0)t=e.call(null,t,this[r],r,this),r--;return t},serialEach:function(e,t,n){var r=this,i=this.toArray(),s=0,o=function(){if(i.length===0){t&&t.call(n||null,r);return}e.call(n||null,o,i.shift(),s++,r)};return o(),this},threadEach:function(e,t,n){var r=this,i=this.length,s=!1,o=function(){--i===0&&!s&&(s=!0,t&&t.call(n||null,r))};return r.length===0?(t&&t.call(n||null,r),this):this.asyncEach(function(r,i,u){if(e.call(n||null,o,r,i,u)===!1)return s=!0,t&&t.call(n||null,u),!1},null,n,1)},unique:function(e,t){var n=this,r=t?n.map(t):n,i=[];return r.reduce(function(t,r,s){if(e?t[t.length-1]!==r||!t.length:u(t,r)===-1)t.push(r),i.push(n[s]);return t},[]),this.getNewObject(i)}})};if(typeof Classify=="undefined"&&typeof module!="undefined"&&module.exports){module.exports=n;return}n(Classify)})(this);